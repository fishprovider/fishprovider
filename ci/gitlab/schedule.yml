#
# Important Notes
#
# `rules` cannot see `variables`, only `script` can see `variables`
#

include:
  - local: /ci/gitlab/_base.yml
  - local: /ci/gitlab/_deploy.yml

schedule-deploy-phone:
  tags:
    - local
  rules:
    - if: $CI_PIPELINE_SOURCE == "schedule"
      when: always
  cache: !reference [.cache_npm, cache]
  timeout: "100 minutes"
  script:
    - if [ -z $SCHEDULE_PHONE ]; then exit 0; fi
    - !reference [.deploy-phone, script]
