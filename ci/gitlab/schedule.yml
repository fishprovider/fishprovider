#
# Important Notes
#
# `rules` cannot see `variables`, only `script` can see `variables`
#

include:
  - local: /ci/gitlab/_base.yml
  - local: /ci/gitlab/_deploy.yml

schedule-deploy-phone-android:
  tags:
    - local
  only:
    variables:
      - $CI_PIPELINE_SOURCE == "schedule"
      - $SCHEDULE_PHONE_ANDROID == "true"
  cache: !reference [.cache_npm, cache]
  timeout: "30 minutes"
  script:
    - echo build-android
    # - !reference [.deploy-phone-android, script]

schedule-deploy-phone-ios:
  tags:
    - local
  only:
    variables:
      - $CI_PIPELINE_SOURCE == "schedule"
      - $SCHEDULE_PHONE_IOS == "true"
  cache: !reference [.cache_npm, cache]
  timeout: "30 minutes"
  script:
    - echo build-ios
    # - !reference [.deploy-phone-ios, script]

schedule-build-web:
  tags:
    - local
  only:
    variables:
      - $CI_PIPELINE_SOURCE == "schedule"
      - $SCHEDULE_WEB == "true"
  cache: !reference [.cache_npm, cache]
  timeout: "30 minutes"
  script:
    - echo build-web
    # - !reference [.build-web, script]
