#
# Important Notes
#
# `rules` cannot see `variables`, only `script` can see `variables`
#

include:
  - local: /ci/gitlab/_base.yml
  - local: /ci/gitlab/_deploy.yml

schedule-deploy-phone-android:
  tags:
    - local
  rules:
    - if: $CI_PIPELINE_SOURCE == "schedule"
      when: always
  cache: !reference [.cache_npm, cache]
  timeout: "30 minutes"
  script:
    - if [ -z $SCHEDULE_PHONE_ANDROID ]; then exit 0; fi
    - !reference [.deploy-phone-android, script]

schedule-deploy-phone-ios:
  tags:
    - local
  rules:
    - if: $CI_PIPELINE_SOURCE == "schedule"
      when: always
  cache: !reference [.cache_npm, cache]
  timeout: "30 minutes"
  script:
    - if [ -z $SCHEDULE_PHONE_IOS ]; then exit 0; fi
    - !reference [.deploy-phone-ios, script]
