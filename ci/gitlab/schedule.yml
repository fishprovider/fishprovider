include:
  - local: /ci/gitlab/_base.yml
  - local: /ci/gitlab/_deploy.yml

schedule-deploy-gate:
  tags:
    - local
  rules:
    - if: $CI_PIPELINE_SOURCE == "schedule"
      when: always
  script:
    - if [ -z $SCHEDULE_GATE ]; then exit 0; fi
    - !reference [.deploy-gate, script]

schedule-deploy-cron:
  tags:
    - local
  variables:
    DEPLOY: $SCHEDULE_CRON
  rules:
    - if: $CI_PIPELINE_SOURCE == "schedule"
      when: always
  script:
    - echo $DEPLOY
    - if [ -z $SCHEDULE_CRON ]; then exit 0; fi
    - !reference [.deploy-cron, script]

schedule-deploy-mon:
  tags:
    - local
  rules:
    - if: $CI_PIPELINE_SOURCE == "schedule"
      when: always
  script:
    - if [ -z $SCHEDULE_MON ]; then exit 0; fi
    - !reference [.deploy-mon, script]

schedule-deploy-pay:
  tags:
    - local
  rules:
    - if: $CI_PIPELINE_SOURCE == "schedule"
      when: always
  script:
    - if [ -z $SCHEDULE_PAY ]; then exit 0; fi
    - !reference [.deploy-pay, script]

schedule-deploy-bot:
  tags:
    - local
  rules:
    - if: $CI_PIPELINE_SOURCE == "schedule"
      when: always
  script:
    - if [ -z $SCHEDULE_BOT ]; then exit 0; fi
    - !reference [.deploy-bot, script]

schedule-deploy-copy:
  tags:
    - local
  rules:
    - if: $CI_PIPELINE_SOURCE == "schedule"
      when: always
  script:
    - if [ -z $SCHEDULE_COPY ]; then exit 0; fi
    - !reference [.deploy-copy, script]

schedule-deploy-head-ctrader:
  tags:
    - local
  rules:
    - if: $CI_PIPELINE_SOURCE == "schedule"
      when: always
  script:
    - if [ -z $SCHEDULE_HEAD_CTRADER ]; then exit 0; fi
    - !reference [.deploy-head-ctrader, script]

schedule-deploy-head-meta:
  tags:
    - local
  rules:
    - if: $CI_PIPELINE_SOURCE == "schedule"
      when: always
  script:
    - if [ -z $SCHEDULE_HEAD_META ]; then exit 0; fi
    - !reference [.deploy-head-meta, script]

schedule-deploy-spot-ctrader:
  tags:
    - local
  rules:
    - if: $CI_PIPELINE_SOURCE == "schedule"
      when: always
  script:
    - if [ -z $SCHEDULE_SPOT_CTRADER ]; then exit 0; fi
    - !reference [.deploy-spot-ctrader, script]

schedule-deploy-spot-meta:
  tags:
    - local
  rules:
    - if: $CI_PIPELINE_SOURCE == "schedule"
      when: always
  script:
    - if [ -z $SCHEDULE_SPOT_META ]; then exit 0; fi
    - !reference [.deploy-spot-meta, script]

schedule-deploy-back:
  tags:
    - local
  rules:
    - if: $CI_PIPELINE_SOURCE == "schedule"
      when: always
  script:
    - if [ -z $SCHEDULE_BACK ]; then exit 0; fi
    - !reference [.deploy-back, script]

schedule-deploy-phone:
  tags:
    - local
  rules:
    - if: $CI_PIPELINE_SOURCE == "schedule"
      when: always
  cache: !reference [.cache_npm, cache]
  timeout: "100 minutes"
  script:
    - if [ -z $SCHEDULE_PHONE ]; then exit 0; fi
    - !reference [.deploy-phone, script]
