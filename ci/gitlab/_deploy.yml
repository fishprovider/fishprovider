.deploy-phone-android:
  script:
    - cd apps-frontend/phone
    - ./clean-deps.sh
    - npm i --prefer-offline --no-audit --no-progress --legacy-peer-deps --cache ~/.npm
    - npm run build-local-android
    - npm run submit-local-android
    - cp build-* ~
    - NOTIF_MSG="Deploy phone android $CI_COMMIT_REF_NAME $CI_COMMIT_SHA"
    - !reference [.notif, script]

.deploy-phone-ios:
  script:
    - cd apps-frontend/phone
    - ./clean-deps.sh
    - npm i --prefer-offline --no-audit --no-progress --legacy-peer-deps --cache ~/.npm
    - npm run build-local-ios
    - npm run submit-local-ios
    - cp build-* ~
    - NOTIF_MSG="Deploy phone ios $CI_COMMIT_REF_NAME $CI_COMMIT_SHA"
    - !reference [.notif, script]

.deploy-phone-update:
  script:
    - cd apps-frontend/phone
    - ./clean-deps.sh
    - npm i --prefer-offline --no-audit --no-progress --legacy-peer-deps --cache ~/.npm
    - npm run deploy-update
    - NOTIF_MSG="Deploy phone update $CI_COMMIT_REF_NAME $CI_COMMIT_SHA"
    - !reference [.notif, script]
